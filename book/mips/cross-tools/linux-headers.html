<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      6.3.&nbsp;Linux-Headers-2.6.38.2
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="clfs" id="clfs-GIT-0.0.1-20130730-mips">
    <div class="navheader">
      <h4>
        Embedded Linux from Source - Version GIT-0.0.1-20130730-mips
      </h4>
      <h3>
        Chapter&nbsp;6.&nbsp;Constructing Cross-Compile Tools
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="cflags.html" title="Build CFLAGS">Prev</a>
          <p>
            Build CFLAGS
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="abi.html" title="ABI Variables">Next</a>
          <p>
            ABI Variables
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter.html" title=
          "Chapter&nbsp;6.&nbsp;Constructing Cross-Compile Tools">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Embedded Linux from Source - Version GIT-0.0.1-20130730-mips">Home</a>
        </li>
      </ul>
    </div>
    <div class="wrap" lang="en" xml:lang="en">
      <h1 class="sect1">
        <a id="ch-cross-tools-linux-headers" name=
        "ch-cross-tools-linux-headers"></a>6.3. Linux-Headers-2.6.38.2
      </h1>
      <div class="package" lang="en" xml:lang="en">
        <h2 class="sect2">
          6.3.1. Introduction
        </h2>
        <p>
          The Linux Kernel contains a make target that installs
          &ldquo;<span class="quote">sanitized</span>&rdquo; kernel headers.
          The Linux Kernel is itself a C program consisting of a number of
          separate source files. Header files are separate files used to keep
          variable definitions consistent between multiple source files.
          These header files are also required during the compilation of
          cros-compiler toolchain. We will need to know which architecture we
          are developing for to install the proper header files. To determine
          this we need what platform we are developing for.
        </p>
        <p>
          The Linux Kernel uses a config file to determine which of the
          source files to compile into the final kernel or modules. The
          kernel source contains a number of configurations. Or in some cases
          the Linux Support Package for the platform will contain a custom
          source file with a configuration. This config file is in part
          determined by the platform and additionally by the users choice of
          features to enable or disable. Typically the config file is
          incomplete and requires additional process to make suitable for
          compiling a kernel. In this chapeter will shall do four things:
          identify the platform, determine the architecture, install the
          appropriate headers, and make the config file for the platform.
        </p>
      </div>
      <div class="platform" lang="en" xml:lang="en">
        <h2 class="sect2">
          6.3.2. Platform and Architecture
        </h2>
        <p>
          This is the first section requiring knowledge of the target
          platform. For this book we will be using the Malta development
          board. By reviewing the initial config file for this platform,
          arch/mips/configs/malta_defconfig, we can determine that the
          architecture is MIPS.
        </p>
      </div>
      <div class="Architecture" lang="en" xml:lang="en">
        <h2 class="sect2">
          6.3.3. Set Architecture
        </h2>
        <pre class="userinput">
<kbd class="command">

CLFS_ARCH=mips
echo export  CLFS_ARCH=mips &gt;&gt; ~/.bashrc

</kbd>
</pre>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          6.3.4. Installation of Linux Headers
        </h2>
        <p>
          For this step you will need the kernel tarball.
        </p>
        <p>
          Install the header files that are common to all Platforms with this
          architecture:
        </p>
        <pre class="userinput">
<kbd class="command">
make mrproper
make ARCH=${CLFS_ARCH} headers_check
make ARCH=${CLFS_ARCH} INSTALL_HDR_PATH=dest headers_install
cp -rv dest/include/* ${CLFS}/usr/include
</kbd>
</pre>
      </div>
      <div class="oldconfig" lang="en" xml:lang="en">
        <h2 class="sect2">
          6.3.5. Make Config
        </h2>
        <pre class="userinput">
<kbd class="command">

cp arch/mips/configs/malta_defconfig .config

yes "" | make ARCH=${CLFS_ARCH} oldconfig

cp .config ${CLFS}/boot/config-2.6.38.2

</kbd>
</pre>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          <a id="contents-linux-headers" name=
          "contents-linux-headers"></a>6.3.6. Contents of Linux-Headers
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed headers:</strong>
              <span class=
              "segbody">/usr/include/{asm,asm-generic,drm,linux,mtd,rdma,scsi,sound,video,xen}/*.h</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Short Descriptions
          </h3>
          <table border="0">
            <col align="left" valign="top" />
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="linux-headers" name=
                    "linux-headers"></a><span class="term"><code class=
                    "filename">/usr/include/{asm,asm-generic,drm,linux,mtd,rdma,scsi,sound,video,xen}/*.h</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    The Linux API headers
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="cflags.html" title="Build CFLAGS">Prev</a>
          <p>
            Build CFLAGS
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="abi.html" title="ABI Variables">Next</a>
          <p>
            ABI Variables
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter.html" title=
          "Chapter&nbsp;6.&nbsp;Constructing Cross-Compile Tools">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Embedded Linux from Source - Version GIT-0.0.1-20130730-mips">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
